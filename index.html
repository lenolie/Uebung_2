<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√úbung 2</title>
    <link href="index.css" rel="stylesheet">
</head>
<header>
   <h2>Science Daily</h2> 
</header>
<body>
    <div class="wrapper">
        <main>
            <h1>
                ‚ÄúThe Elusive Lynx Returns: A New Species in the Palatinate Forest‚Äù
            </h1>
        
            <!--MIt cmd + shift + p, wrap with blabla ausw√§hlen und in section unterteilen-->
            <section id="Introduction">
                <h2>Introduction</h2>
                <p>
                    In the heart of the Palatinate Forest, nestled near the charming village of Hirschthal, a remarkable discovery has unfolded‚Äîa species that once roamed 
                    these ancient woodlands, vanished, and now reclaims its rightful place. Meet the Eurasian lynx (Lynx lynx), a majestic feline that has returned to the region after 
                    decades of absence. In this article, we delve into the lynx‚Äôs fascinating journey, its ecological significance, and the tireless efforts behind its reintroduction.
                </p>
            </section>
            <section id="The_Lynx‚Äôs_Historical_Range">
                <h2>The Lynx‚Äôs Historical Range</h2>
                <p>
                    Originally, the Eurasian lynx inhabited vast forested and steppe areas across northern and central Eurasia. 
                    However, by the mid-20th century, its population dwindled due to persecution and habitat loss. Western Europe witnessed their local extinction, 
                    leaving only four relict populations in Scandinavia, the Carpathians, the Baltic States, and the Balkans. Russia remained the stronghold for these elusive cats.
                </p>
            </section>
            <section id="Hints_and_Hope">
                <h2>Hints and Hope</h2>
                <p>
                    In the Palatinate Forest, lynx sightings persisted sporadically since the early 1980s. Reports also surfaced from the Eifel region, although the origins of 
                    these individuals remained a mystery. The resurgence of forests and prey populations, 
                    coupled with the end of persecution, paved the way for lynx recovery across Europe. Yet, the Balkan population still faces threats.
                </p>
            </section>
            <section id="Project_Reintroduction">
                <h2>Project Reintroduction</h2>
                <p>
                    Enter the ambitious project: the reintroduction of lynx to the Palatinate Forest. Between 2016 and 2019, a total of 20 lynxes from Switzerland and Slovakia 
                    found their new home here. Each lynx received a GPS transmitter collar, 
                    allowing researchers to monitor their movements and adapt to their needs. Remarkably, at least 10 lynx kittens were born in their secret forest abode.
                </p>
            </section>
            <section id="Ecological_Impact">
                <h2>Ecological Impact</h2>
                <p>
                    The lynx plays a pivotal role as a keystone species. By preying on roe deer, red deer, and wild boar, it helps maintain ecological balance. Its presence influences 
                    vegetation growth, benefiting other wildlife. Forest visitors need not fear‚Äîthe lynx poses no danger to humans. Instead, it enriches our natural heritage.
                </p>
            </section>
            <section id="A_Shared_Journey">
                <h2>A Shared Journey (TTS)</h2>

                <div class="paragraph-wrapper">
                    <p>
                        The project extends beyond biology. Public outreach and collaboration with interest groups in Germany and France foster understanding and appreciation. As the lynx
                        silently roams the forest, it reminds us of our shared responsibility‚Äîto protect and restore the delicate tapestry of life.
                    </p>
                    <p> Click the ear for text-to-speech!</p>
                    <div class="readThis">üëÇ</div>
                </div>
            </section>
            <section id="Audio">
                <h2>Audio</h2>
                <p>
                    <!--target _blank, sagt die Audio soll sich in einem neuen, leeren Tab √∂ffnen-->
                    So h√∂rt sich ein <a href="./assets/Windspiel.mp3" target="_blank">Windspiel</a> an.
                </p>
                <figure>
                    <audio id="Windspiel" controls src="./assets/Windspiel.mp3"></audio>
                    <figcaption>Auch so h√∂rt sich ein Windspiel an.</figcaption>
                </figure>
            </section>
            <section id="Conclusion">
                <h2>Conclusion</h2>
                <p>
                    The Palatinate Forest echoes with the soft footfalls of the lynx, a testament to resilience and conservation. As we celebrate its return, 
                    let us cherish this enigmatic species and ensure its legacy thrives for generations to come.
                </p>
            </section>
            <section id="References">
                <h2>References</h2>
                <p>
                    Reintroduction of lynx in Germany | Rewilding Europe -> https://rewildingeurope.com/rew-project/reintroduction-of-lynx-in-the-palatinate-forest-biosphere-reserve/
                    Palatinate Forest - Wikipedia -> https://en.wikipedia.org/wiki/Palatinate_Forest
                    Assessing the Status of a Reintroduced Lynx Population in the Palatinate Forest -> https://naturalsciencenews.com/article/2095
                </p>
            </section>
            <section id="Platzhalter">
                <h2>Platzhalter</h2>
                <p>
                    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Corporis dignissimos sint ad voluptates tempore asperiores voluptas excepturi accusantium delectus, molestias non beatae, soluta dolor recusandae reprehenderit nisi est? Nihil, accusantium!
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Corrupti blanditiis assumenda esse, provident harum nam quibusdam voluptatum excepturi magnam odio dignissimos quam aut magni distinctio vitae at. Et, soluta quod?
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Voluptatum doloribus culpa, nam incidunt explicabo assumenda consequuntur veniam sint facere minima expedita corrupti eum, saepe dolor vel quidem tenetur necessitatibus esse!
                    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Tempora ullam quis assumenda, laborum et quod corrupti illo quam modi voluptate placeat, reiciendis, amet impedit distinctio quaerat cumque! Eos, blanditiis quo!
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Expedita, molestias corrupti totam officia velit vel culpa minima tempore tempora hic dolores iusto amet quaerat commodi nulla ducimus dolorum. Culpa, inventore!
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo ratione voluptatum animi in quod dolorem sint accusamus! Nam ad aliquid nihil perspiciatis, neque autem ratione quam aspernatur ipsum odio eius!
                    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Corporis dignissimos sint ad voluptates tempore asperiores voluptas excepturi accusantium delectus, molestias non beatae, soluta dolor recusandae reprehenderit nisi est? Nihil, accusantium!
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Corrupti blanditiis assumenda esse, provident harum nam quibusdam voluptatum excepturi magnam odio dignissimos quam aut magni distinctio vitae at. Et, soluta quod?
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Voluptatum doloribus culpa, nam incidunt explicabo assumenda consequuntur veniam sint facere minima expedita corrupti eum, saepe dolor vel quidem tenetur necessitatibus esse!
                    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Tempora ullam quis assumenda, laborum et quod corrupti illo quam modi voluptate placeat, reiciendis, amet impedit distinctio quaerat cumque! Eos, blanditiis quo!
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Expedita, molestias corrupti totam officia velit vel culpa minima tempore tempora hic dolores iusto amet quaerat commodi nulla ducimus dolorum. Culpa, inventore!
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto, ducimus unde. Dolorem illum cum inventore repudiandae vel deserunt magni recusandae sapiente ipsum, eius fugiat tenetur distinctio aliquam perferendis blanditiis pariatur.
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto, ducimus unde. Dolorem illum cum inventore repudiandae vel deserunt magni recusandae sapiente ipsum, eius fugiat tenetur distinctio aliquam perferendis blanditiis pariatur.
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo ratione voluptatum animi in quod dolorem sint accusamus! Nam ad aliquid nihil perspiciatis, neque autem ratione quam aspernatur ipsum odio eius!
                    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Corporis dignissimos sint ad voluptates tempore asperiores voluptas excepturi accusantium delectus, molestias non beatae, soluta dolor recusandae reprehenderit nisi est? Nihil, accusantium!
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Corrupti blanditiis assumenda esse, provident harum nam quibusdam voluptatum excepturi magnam odio dignissimos quam aut magni distinctio vitae at. Et, soluta quod?
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Voluptatum doloribus culpa, nam incidunt explicabo assumenda consequuntur veniam sint facere minima expedita corrupti eum, saepe dolor vel quidem tenetur necessitatibus esse!
                    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Tempora ullam quis assumenda, laborum et quod corrupti illo quam modi voluptate placeat, reiciendis, amet impedit distinctio quaerat cumque! Eos, blanditiis quo!
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Expedita, molestias corrupti totam officia velit vel culpa minima tempore tempora hic dolores iusto amet quaerat commodi nulla ducimus dolorum. Culpa, inventore!
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo ratione voluptatum animi in quod dolorem sint accusamus! Nam ad aliquid nihil perspiciatis, neque autem ratione quam aspernatur ipsum odio eius!
                    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Corporis dignissimos sint ad voluptates tempore asperiores voluptas excepturi accusantium delectus, molestias non beatae, soluta dolor recusandae reprehenderit nisi est? Nihil, accusantium!
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Corrupti blanditiis assumenda esse, provident harum nam quibusdam voluptatum excepturi magnam odio dignissimos quam aut magni distinctio vitae at. Et, soluta quod?
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Voluptatum doloribus culpa, nam incidunt explicabo assumenda consequuntur veniam sint facere minima expedita corrupti eum, saepe dolor vel quidem tenetur necessitatibus esse!
                    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Tempora ullam quis assumenda, laborum et quod corrupti illo quam modi voluptate placeat, reiciendis, amet impedit distinctio quaerat cumque! Eos, blanditiis quo!
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Expedita, molestias corrupti totam officia velit vel culpa minima tempore tempora hic dolores iusto amet quaerat commodi nulla ducimus dolorum. Culpa, inventore!
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto, ducimus unde. Dolorem illum cum inventore repudiandae vel deserunt magni recusandae sapiente ipsum, eius fugiat tenetur distinctio aliquam perferendis blanditiis pariatur.
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto, ducimus unde. Dolorem illum cum inventore repudiandae vel deserunt magni recusandae sapiente ipsum, eius fugiat tenetur distinctio aliquam perferendis blanditiis pariatur.
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Explicabo ratione voluptatum anim
                </p>
            </section>
        </main>
        <div class="right">
            <div class="table_of_contents">
                <h3>Table of contents</h3>
                <ul>
                    <li><a href="#Introduction">Introduction</a></li>
                    <li><a href="#The_Lynx‚Äôs_Historical_Range">The_Lynx‚Äôs_Historical_Ranges</a></li>
                    <li><a href="#Hints_and_Hope">Hints and Hope</a></li>
                    <li><a href="#Project_Reintroduction">Project Reintroduction</a></li>
                    <li><a href="#Ecological_Impact">Ecological Impact</a></li>
                    <li><a href="#A_Shared_Journey">A Shared Journey</a></li>
                    <li><a href="#Audio">Audio</a></li>
                    <li><a href="#Conclusion">Conclusion</a></li>
                    <li><a href="#References">References</a></li>
                    <li><a href="#Platzhalter">Platzhalter</a></li>
                </ul>
            </div>
            <div class="quiz-container">
                <h2>Was trinkt der Lynx am liebsten?</h2>
                <div class="draggable-items">
                    <div draggable="true">Kaffee</div>
                    <div draggable="true">Tee</div>
                    <div draggable="true">Espresso</div>
                    <div draggable="true">Wasser</div>
                </div>
                <div class="dropbox" id="foo">Drop it!</div>
                <div class="auswahl" id="foo"> Hier kommt ein Ergebniss</div>
            </div>
        </div>

    </div>

    <script>
        function upgradeTableOfContents () {
            //hole alle Unterabschnitte des Artikels, die eine ID haben
            const sections = document.querySelectorAll("section[id]");

            //Definition des Observers: beobachte Ver√§nderungen der Sichtbarkeit
            //Wenn sich die Sichtbarkeit von einem oder mehreren Elementen √§ndert, dann...
            const observer = new IntersectionObserver(function (entries) {
                let madeOneVisible = false;

            //aktualisiere unsere Infos zur Sichtbarkeit f√ºr die Elemente
            for (const entry of entries) {
                //Hole aus den Infos das Element, das der Observer uns gerade gibt.
                const theSection = infos.find((info) => info.id === entry.target.id);
                //aktualisiere die Sichtbarkeitsinfo
                theSection.visible = entry.isIntersecting;

                const fritz = "foo";


                const foo = {
                    name: "Fritz",
                    foody: function () {
                        console.log("hello")
                    }
                }

                foo.foody();


            }

            //setze Stylings aller Links in TOC zur√ºck
            for (const info of infos) {
                const selector = `div li a[href="#${info.id}"]`;
                document.querySelector(selector).parentElement.classList.remove("active");
            }

            //gehe √ºber alle Infos, die wir zu unseren Section-Tags gesammelt haben 
            for (const info of infos) {
                //wenn wir ein sichtbares haben und noch keines als solches gestyled haben
                //also: wenn wir bereits eines gestyled haben, wollen wir in diesen Abschnitt nicht mehr rein!
                //denn wir wollen ja nur das oberste Element stylen!
                if(info.visible === true && madeOneVisible === false) {
                    //style das Element, d.h. setze eine Klasse, f√ºgt dem Element die class "aktive" hinzu welche im css gestyled werden kann
                    document.querySelector(`div li a[href="#${info.id}"]`).parentElement.classList.add("active");
                    //wenn das Element keine Unterkapitel hat, vermerke, dass wir schon eines gestyled haben
                    //Falls es Unterkapitel hat, vermerke das nicht, da wir dann auch die Unterkapitel anschauen m√ºssen
                    if (!info.hasSubChapters)madeOneVisible = true;
                    }   
                }
            });

           
            // den Observer auf alle Unterkapitel anwenden & Infos zu den Elementen speichern
            const infos = [];
            sections.forEach((section) => {
                infos.push({
                    id: section.id,
                    visible:false,
                    //vermerkt, ob ein Element Unterkapitel hat
                    hasSubChapters: Array.from(section.children).some((el) => el.tagName === "SECTION")
                });

                observer.observe(section);
            });
        }
        //wenn man Funktionen verwendet muss man sie auch aufrufen!
        upgradeTableOfContents();
        
        //Drag and Drop
        const droppedStuff = [];

        const draggableItems = document.querySelectorAll(".draggable-items *");
        const dropbox = document.querySelector(".dropbox");
        const auswahl = document.querySelector(".auswahl");

        draggableItems.forEach(function (element) {
            element.addEventListener("dragstart", function (e) {
                e.dataTransfer.setData("text/plain", e.target.innerText);
            });
        } );

        dropbox.addEventListener("dragover", function(e) {
            //prevent default to allow drop
            e.preventDefault();
        });

        dropbox.addEventListener("drop", function(dropEvent) {
            const data = dropEvent.dataTransfer.getData("text/plain");
            droppedStuff.push(data);
            auswahl.innerText = 
                "You have selected " + droppedStuff.length + " thing(s)! They are: " + droppedStuff;
        })

        //Audio einbinden
        let textToSpeech, voices;
        //l√§dt die Stimmen vom Browser
        async function loadVoices() {
            console.info("Loading voices for TTS...");
            if(voices) return Promise.resolve(voices);
            return new Promise(function(resolve){
                const interval = setInterval(function(){
                    const synth = window.speechSynthesis;
                    const foundVoices = synth.getVoices();
                    if (foundVoices.length >0) {
                        clearInterval(interval);
                        console.info("Finished loading voices for TTS!");
                        voices = foundVoices;
                        return resolve(foundVoices);
                    }
                },15)
            })
        }
        //nimmt Sprache, Stimme und Text entgegen und liest vor.
        async function speak(lang, voice, text) {
            const synth = window.speechSynthesis;
            const voices = await this.loadVoices();
            textToSpeech = new SpeechSynthesisUtterance(text);
            if (voice) {
                textToSpeech.voice = voices.find((aVoice) => aVoice.lang.includes(lang) && aVoice.default === true)
            }
            textToSpeech.lang = lang;
            synth.speak(textToSpeech);
        }

        function readSampleText() {
            const text = "The project extends beyond biology. Public outreach and collaboration with interest groups in Germany and France foster understanding and appreciation. As the lynxsilently roams the forest, it reminds us of our shared responsibility‚Äîto protect and restore the delicate tapestry of life.";
            //wir geben den Wert undefined f√ºr die Stimme mit, damit der Browser die Standardstimme verwendet
            speak("en-US", undefined, text);
        }

        //wandelt die Links so um, dass sie mit Text-To-Speech vorgelesen werden.
        function setUpTTS() {
            //wir holen uns den Link, der den englischen Text vorlesen soll.
            const linkWithAudioForSharedJourney = document.querySelector("#A_Shared_Journey");
            //wenn der Link geklickt wird, wird folgende Funktion ausgef√ºhrt
            linkWithAudioForSharedJourney.addEventListener("click", function (e) {
                //der Link soll nicht sein normeles Verhalten zeigen, also nicht navigieren
                e.preventDefault();
                //Funktion readSampleText() wird aufgerufen
                readSampleText();
            })
            //alle Links mit Klasse.readThis holen
            const readParagraphLinks = document.querySelectorAll(".readThis");
            //√ºber alle Links interieren
            for (const link of readParagraphLinks) {
                //wenn auf einen der Lins geklickt wird, soll folgende Funktion ausgef√ºhrt werden
                link.addEventListener("click", function(e) {
                    //link soll nicht standartverhalten ausf√ºhren 
                    e.preventDefault();
                    //vom geklickten Link aus, gehen wir zum Eltern-Element (div) und suchen darin nach p-Tag; davon holen wir und den Text, der darin steht
                    const text = link.parentElement.querySelector("p").innerText;
                    //und lassen diesen vorlesen
                    speak("de-DE", undefined, text);
                })
            }
        }
        loadVoices();
        setUpTTS();
        
    </script>
    
</body>
</html>